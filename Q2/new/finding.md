#### 难点
4到5的转换比3-3难，一方面由于没有逆矩阵无法精确转换（即使在重合区域），另一方面关系复杂，难以拟合非线性函数。
可以强调一下不能使用q1中的简单模型，因为效果非常差（可以看看color_mapping_mlp_simple.png，着重提一下）。
#### 方法
为了处理这些问题，进行如下改进：
（1）从训练数据下手，构造更科学的训练数据而不是简单随机生成，使得训练数据更符合实际，获得更好训练效果。使用了色域边界采样、通道极值采样、色域内均匀采样等方法。
（2）从模型下手，提高模型复杂度，改进包括：

1. **光谱注意力机制 (ChromaticAttention)**：
- 通过通道注意力增强对重要颜色分量的关注
- 使用自适应平均池化捕获全局光谱特征
- 采用Sigmoid激活生成通道权重

1. **色域投影层 (GamutProjection)**：
- 线性投影：使用显示设备的色域矩阵进行物理约束
- 非线性压缩：可微分的tanh函数确保输出严格在[0,1]
- 双重约束保证输出符合显示设备物理限制

1. **网络架构特点**：
- 深度残差结构增强梯度流动
- LayerNorm提升训练稳定性
- GELU激活函数增强非线性表达能力
- Dropout防止过拟合（p=0.2）
- 
1. **混合感知损失 (ChromaticLoss)**：
- 结合XYZ空间的MSE损失和CIEDE2000感知损失
- 动态权重调整（推荐α=0.6, β=0.4）
- 支持端到端的颜色感知优化

（3）除此之外还调整了优化器等等。

#### 创新点
与q1差不多，可以说说引入了新的注意力机制和新模型结构，以及改进了训练数据。

#### 待提高的点
1. 训练数据不够多，可以尝试增加训练数据量，或者使用数据增强技术。
2. 模型复杂度不够高，可以尝试增加模型层数或者使用更复杂的模型结构。

#### 图片
color_mapping_mlp_fusion.png为模型(使用混合损失)映射。
color_mapping_mlp_use_difference_as_loss.png是使用欧氏距离作为loss训出的模型的映射。
color_mapping_minimize.png是使用原始方法（仓库方法）的映射，可以看到更加精确，但实际上对于每个输入都需要单独进行优化，而不是一整个函数，而不像神经网络可以反复使用。
color_mapping_mlp_simple.png是使用简单模型（q1）的映射，可以看到效果非常差。
!!!!!输出中所谓色差都是简单的欧式距离计算，并不是感知色差。
